{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Recorder from \"./recorder\";\nvar microphoneStream;\nvar rec = Recorder;\nvar input;\n\nexport function startRecording(_ref) {\n  var audioContext, errHandler, onStreamLoad, stream;\n  return _regeneratorRuntime.async(function startRecording$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          audioContext = _ref.audioContext, errHandler = _ref.errHandler, onStreamLoad = _ref.onStreamLoad;\n          _context.prev = 1;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(navigator.mediaDevices.getUserMedia({\n            audio: true\n          }));\n        case 4:\n          stream = _context.sent;\n          if (onStreamLoad) {\n            onStreamLoad();\n          }\n\n          microphoneStream = stream;\n\n          input = audioContext.createMediaStreamSource(stream);\n          rec = new Recorder(input);\n\n          rec.record();\n          return _context.abrupt(\"return\", stream);\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](1);\n          console.log(_context.t0);\n          if (errHandler) {\n            errHandler();\n          }\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[1, 13]], Promise);\n}\n\nexport function stopRecording(_ref2) {\n  var exportWAV = _ref2.exportWAV,\n    wavCallback = _ref2.wavCallback;\n  rec.stop();\n\n  microphoneStream.getAudioTracks()[0].stop();\n\n  if (exportWAV && wavCallback) {\n    rec.exportWAV(function (blob) {\n      return wavCallback(blob);\n    });\n  }\n  rec.clear();\n}","map":{"version":3,"names":["Recorder","microphoneStream","rec","input","startRecording","audioContext","errHandler","onStreamLoad","navigator","mediaDevices","getUserMedia","audio","stream","createMediaStreamSource","record","console","log","stopRecording","exportWAV","wavCallback","stop","getAudioTracks","blob","clear"],"sources":["C:/Users/netra/Documents/GitHub/RoutineRemind/screens/StudentScreen/Hooks/recorderHelpers.js"],"sourcesContent":["import Recorder from './recorder';\n\nlet microphoneStream; // stream from getUserMedia()\nlet rec = Recorder; // Recorder.js object\nlet input; // MediaStreamAudioSourceNode we'll be recording\n\n/**\n *\n * @param {{\n * audioContext: AudioContext\n * errHandler?: () => void\n * onStreamLoad?: () => void\n * }}\n * @returns {Promise<MediaStream>}\n */\nexport async function startRecording({\n  audioContext,\n  errHandler,\n  onStreamLoad,\n}) {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n\n    if (onStreamLoad) {\n      onStreamLoad();\n    }\n\n    /*  assign stream for later use  */\n    microphoneStream = stream;\n\n    /* use the stream */\n    input = audioContext.createMediaStreamSource(stream);\n\n    rec = new Recorder(input);\n\n    // start the recording process\n    rec.record();\n\n    return stream;\n  } catch (err) {\n    console.log(err);\n\n    if (errHandler) {\n      errHandler();\n    }\n  }\n}\n\n/**\n *\n * @param {{\n * exportWAV: boolean\n * wavCallback?: (blob: Blob) => void\n * }}\n */\nexport function stopRecording({ exportWAV, wavCallback }) {\n  // stop recorder.js recording\n  rec.stop();\n\n  // stop microphone access\n  microphoneStream.getAudioTracks()[0].stop();\n\n  // create the wav blob\n  if (exportWAV && wavCallback) {\n    rec.exportWAV((blob) => wavCallback(blob));\n  }\n\n  rec.clear();\n}\n"],"mappings":";AAAA,OAAOA,QAAQ;AAEf,IAAIC,gBAAgB;AACpB,IAAIC,GAAG,GAAGF,QAAQ;AAClB,IAAIG,KAAK;;AAWT,OAAO,SAAeC,cAAc;EAAA;EAAA;IAAA;MAAA;QAAA;UAClCC,YAAY,QAAZA,YAAY,EACZC,UAAU,QAAVA,UAAU,EACVC,YAAY,QAAZA,YAAY;UAAA;UAAA;UAAA,iCAGWC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;YAAEC,KAAK,EAAE;UAAK,CAAC,CAAC;QAAA;UAAnEC,MAAM;UAEZ,IAAIL,YAAY,EAAE;YAChBA,YAAY,EAAE;UAChB;;UAGAN,gBAAgB,GAAGW,MAAM;;UAGzBT,KAAK,GAAGE,YAAY,CAACQ,uBAAuB,CAACD,MAAM,CAAC;UAEpDV,GAAG,GAAG,IAAIF,QAAQ,CAACG,KAAK,CAAC;;UAGzBD,GAAG,CAACY,MAAM,EAAE;UAAC,iCAENF,MAAM;QAAA;UAAA;UAAA;UAEbG,OAAO,CAACC,GAAG,aAAK;UAEhB,IAAIV,UAAU,EAAE;YACdA,UAAU,EAAE;UACd;QAAC;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;;AAWL,OAAO,SAASW,aAAa,QAA6B;EAAA,IAA1BC,SAAS,SAATA,SAAS;IAAEC,WAAW,SAAXA,WAAW;EAEpDjB,GAAG,CAACkB,IAAI,EAAE;;EAGVnB,gBAAgB,CAACoB,cAAc,EAAE,CAAC,CAAC,CAAC,CAACD,IAAI,EAAE;;EAG3C,IAAIF,SAAS,IAAIC,WAAW,EAAE;IAC5BjB,GAAG,CAACgB,SAAS,CAAC,UAACI,IAAI;MAAA,OAAKH,WAAW,CAACG,IAAI,CAAC;IAAA,EAAC;EAC5C;EAEApB,GAAG,CAACqB,KAAK,EAAE;AACb"},"metadata":{},"sourceType":"module"}